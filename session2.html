<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>CRA Europe data science session 2 - Python, the list type, Numpy</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="session2_files/libs/clipboard/clipboard.min.js"></script>
<script src="session2_files/libs/quarto-html/quarto.js"></script>
<script src="session2_files/libs/quarto-html/popper.min.js"></script>
<script src="session2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="session2_files/libs/quarto-html/anchor.min.js"></script>
<link href="session2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="session2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="session2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="session2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="session2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#a-basic-reminder-of-stata-data-structures" id="toc-a-basic-reminder-of-stata-data-structures" class="nav-link active" data-scroll-target="#a-basic-reminder-of-stata-data-structures"><span class="toc-section-number">1</span>  A basic reminder of Stata data structures</a></li>
  <li><a href="#one-cell-of-c-code" id="toc-one-cell-of-c-code" class="nav-link" data-scroll-target="#one-cell-of-c-code"><span class="toc-section-number">2</span>  One cell of C-code</a></li>
  <li><a href="#standard-python" id="toc-standard-python" class="nav-link" data-scroll-target="#standard-python"><span class="toc-section-number">3</span>  Standard Python</a>
  <ul class="collapse">
  <li><a href="#python-is-dynamically-typed" id="toc-python-is-dynamically-typed" class="nav-link" data-scroll-target="#python-is-dynamically-typed"><span class="toc-section-number">3.1</span>  Python is dynamically typed</a></li>
  <li><a href="#more-complex-types" id="toc-more-complex-types" class="nav-link" data-scroll-target="#more-complex-types"><span class="toc-section-number">3.2</span>  More complex types</a></li>
  <li><a href="#slicing" id="toc-slicing" class="nav-link" data-scroll-target="#slicing"><span class="toc-section-number">3.3</span>  Slicing</a></li>
  <li><a href="#iteration-over-lists" id="toc-iteration-over-lists" class="nav-link" data-scroll-target="#iteration-over-lists"><span class="toc-section-number">3.4</span>  Iteration over lists</a></li>
  <li><a href="#two-important-pythonic-constructs-list-comprehensions-and-lambda-functions-remember" id="toc-two-important-pythonic-constructs-list-comprehensions-and-lambda-functions-remember" class="nav-link" data-scroll-target="#two-important-pythonic-constructs-list-comprehensions-and-lambda-functions-remember"><span class="toc-section-number">3.5</span>  Two important Pythonic constructs: list comprehensions and lambda functions: remember!!</a></li>
  </ul></li>
  <li><a href="#numpy" id="toc-numpy" class="nav-link" data-scroll-target="#numpy"><span class="toc-section-number">4</span>  Numpy</a>
  <ul class="collapse">
  <li><a href="#slicing-1" id="toc-slicing-1" class="nav-link" data-scroll-target="#slicing-1"><span class="toc-section-number">4.1</span>  Slicing</a></li>
  <li><a href="#concatenating-arrays" id="toc-concatenating-arrays" class="nav-link" data-scroll-target="#concatenating-arrays"><span class="toc-section-number">4.2</span>  Concatenating arrays</a></li>
  <li><a href="#universal-functions" id="toc-universal-functions" class="nav-link" data-scroll-target="#universal-functions"><span class="toc-section-number">4.3</span>  Universal functions</a></li>
  <li><a href="#boolean-masks" id="toc-boolean-masks" class="nav-link" data-scroll-target="#boolean-masks"><span class="toc-section-number">4.4</span>  Boolean masks</a></li>
  <li><a href="#example-of-numerous-functionality-creating-a-histogram-of-univariate-random-numbers" id="toc-example-of-numerous-functionality-creating-a-histogram-of-univariate-random-numbers" class="nav-link" data-scroll-target="#example-of-numerous-functionality-creating-a-histogram-of-univariate-random-numbers"><span class="toc-section-number">4.5</span>  Example of numerous functionality: creating a histogram of univariate random numbers</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">CRA Europe data science session 2 - Python, the list type, Numpy</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>In this session, we look at the basic data structures of Python and Numpy, and contrast them with Stata and C</p>
<section id="a-basic-reminder-of-stata-data-structures" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="a-basic-reminder-of-stata-data-structures"><span class="header-section-number">1</span> A basic reminder of Stata data structures</h2>
<p>In Stata, the complete focus of the language is on the analysis of data stored in one single table. Only in Stata 16, ‘frames’ were introduced. The focus on one single table means that: all variables by default are vectors, i.e.&nbsp;columns in a table, with the column length equal to the number of observations. Therefore Stata is a Vector based language, and variables are just column names. Python, as we will see, is not, but the libraries NumPy and Pandas which we will use provide that addition.</p>
<p>Stata is very rigid: for example, one cannot overwrite a column by generating a new column with the same name -&gt; weird</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>stata</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>clear <span class="bu">all</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="bu">set</span> obs <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
. clear all

. set obs 10
Number of observations (_N) was 0, now 10.

. </code></pre>
</div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>stata</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="bu">set</span> seed <span class="dv">10101</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>generate x1var <span class="op">=</span> runiform()</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>generate x2var <span class="op">=</span> char(runiformint(<span class="dv">80</span>,<span class="dv">90</span>))</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span> x1var x2var</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
. set seed 10101

. generate x1var = runiform()

. generate x2var = char(runiformint(80,90))

. list x1var x2var

     +------------------+
     |    x1var   x2var |
     |------------------|
  1. | .3042232       Q |
  2. | .5540206       Y |
  3. | .2794988       P |
  4. | .2006274       X |
  5. | .1246266       W |
     |------------------|
  6. | .6718853       W |
  7. | .4371392       R |
  8. | .0614367       P |
  9. | .0501941       U |
 10. | .8434175       P |
     +------------------+

. </code></pre>
</div>
</div>
<p>Everything that is different from a column must be declared explicitly, therefoe Stata is “statically typed” (with no type declaration required for the main table (-&gt; confusing) Stata commands following the pattern: command-space-output-space-input1-space-input2-space-input3 - where output and input are vectors of the same size, i.e.&nbsp;columns in the table. So each space has a meaning - easy to read once you understand it, but very limiting since it is a line-by-line approach. It is not possible to just type a variable to display the value, for columns one types ‘list’, for scalars ‘display’ -&gt; weird</p>
<p>Stata does limited ‘broadcasting’, which we will experience a little later. For example, adding the scalar 5 to a column increments all values in the column by 5.m</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>stata</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>scalar a<span class="op">=</span><span class="dv">5</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>generate y <span class="op">=</span> a <span class="op">+</span> x1var</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="bu">list</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
. scalar a=5

. generate y = a + x1var

. list y

     +----------+
     |        y |
     |----------|
  1. | 5.304223 |
  2. | 5.554021 |
  3. | 5.279499 |
  4. | 5.200627 |
  5. | 5.124627 |
     |----------|
  6. | 5.671885 |
  7. | 5.437139 |
  8. | 5.061437 |
  9. | 5.050194 |
 10. | 5.843418 |
     +----------+

. </code></pre>
</div>
</div>
<p>To summarise, Stata is statically typed but has a focus on a single table.</p>
</section>
<section id="one-cell-of-c-code" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="one-cell-of-c-code"><span class="header-section-number">2</span> One cell of C-code</h2>
<p>The most important system language is called ‘c’ which was developed in the 1960s. Only now there is a possibility that it will lose its importance to a new language called ‘Rust’, developed by the Mozilla foundation - so use the Mozilla browser to support them, otherwise we will end up with dominance by a language developed by Google or Apple.</p>
<p>C is statically typed, C is based on scalars and C uses ; and brackets to structure the code.</p>
<p>int result = 0; for(int i=0; i&lt;10; i++){ result += i; }</p>
<p>Result must be declared to be an integer; also i’s type must be declared. commands are in semicolons; loops in curly brackets; the for cmd in round brackets.</p>
</section>
<section id="standard-python" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="standard-python"><span class="header-section-number">3</span> Standard Python</h2>
<p>We will now look at Python, first at standard Python and then at Numpy, a vector/matrix library that is at the core of Python’s success as a data science language.</p>
<section id="python-is-dynamically-typed" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="python-is-dynamically-typed"><span class="header-section-number">3.1</span> Python is dynamically typed</h3>
<p>Python is ‘dynamically typed’ and it uses indentation to structure the language, so almost like extending the stata space idea to be more flexible and to allow multiple lines.</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>):</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    result <span class="op">+=</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>result</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>10</code></pre>
</div>
</div>
<p>None of the variables’s types need to be declared. The type is inferred by Python: this makes the language very readable but also very slow. There are no brackets or semicolons to distinguish between commands; the code becomes very readable.</p>
<p>In contrast to Stata, we can reassign values, we do not get the rigidity of ‘command/output/input’.</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> <span class="st">'hello'</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>result</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>'hello'</code></pre>
</div>
</div>
</section>
<section id="more-complex-types" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="more-complex-types"><span class="header-section-number">3.2</span> More complex types</h3>
<p>While we do not declare datatypes, these are inferred. There are integers, strings, floats, booleans, etc. But the second strenght of Python are the existing of more complex datatypes. These are lists, tuples, dictionaries, sets, collections, iterators, generators, arrays…</p>
<p>For us, the most important is a list and we will look into it now. A list is a list of numbers, strings, or even a mix.</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>l <span class="op">=</span> <span class="bu">list</span>(<span class="bu">range</span>(<span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>l</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="bu">type</span>(l)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>list</code></pre>
</div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>l.append(<span class="st">'my_string'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>l</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 'my_string']</code></pre>
</div>
</div>
<p>We can also put a list into a list. This is amazing, but it makes Python incredibly slow.</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>l.append([<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>l</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 'my_string', [5, 6, 7]]</code></pre>
</div>
</div>
</section>
<section id="slicing" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="slicing"><span class="header-section-number">3.3</span> Slicing</h3>
<p>We can access individual elements of the list using [ ]. This is called ‘slicing’ and is a fundamental concept in Python that you use all the time.</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>l[<span class="dv">0</span>]</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>l[<span class="dv">5</span>:<span class="dv">7</span>]</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>l[<span class="op">-</span><span class="dv">2</span>:]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>0</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>[5, 6]</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>['my_string', [5, 6, 7]]</code></pre>
</div>
</div>
<p>In Python, objects are indexed starting with ZERO., so l[0] is the first element in the list -&gt; careful. One advantage is supposed to be that (i) in a slice, one can see how many elements it has: l[3:5] has 7-5=2 elements, and (ii) slices partition lists at the ‘right element’, ie. l[3:] is a slice which which starts with the</p>
</section>
<section id="iteration-over-lists" class="level3" data-number="3.4">
<h3 data-number="3.4" class="anchored" data-anchor-id="iteration-over-lists"><span class="header-section-number">3.4</span> Iteration over lists</h3>
<p>One can iterate directly over the elements of a list:</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> wonder <span class="kw">in</span> l:</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(wonder)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0
1
2
3
4
5
6
7
8
9
my_string
[5, 6, 7]</code></pre>
</div>
</div>
</section>
<section id="two-important-pythonic-constructs-list-comprehensions-and-lambda-functions-remember" class="level3" data-number="3.5">
<h3 data-number="3.5" class="anchored" data-anchor-id="two-important-pythonic-constructs-list-comprehensions-and-lambda-functions-remember"><span class="header-section-number">3.5</span> Two important Pythonic constructs: list comprehensions and lambda functions: remember!!</h3>
<p>A list comprehension is a loop inside a list together with a throwaway function. It is probably the most Pythonic construct. Not that x has local scope.</p>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="st">'alright'</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>[x<span class="op">**</span><span class="dv">2</span> <span class="cf">for</span> x <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">10</span>) <span class="cf">if</span> x<span class="op">&lt;</span><span class="dv">5</span>]</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>[0, 1, 4, 9, 16]</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>'alright'</code></pre>
</div>
</div>
<p>A further special feature is a lambda function, which again is a throwaway function - this is a very important construct to modify values in a dataset.</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="kw">lambda</span> x: x<span class="op">**</span><span class="dv">2</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>a(<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>25</code></pre>
</div>
</div>
</section>
</section>
<section id="numpy" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="numpy"><span class="header-section-number">4</span> Numpy</h2>
<p>Numpy is core library of Python’s data science capabilities. It used to be called ‘numeric’. It creates arrays - without row / column names!, so this is raw. That’s wy it is the core, but most of the time you will not see Numpy directly in action. But understanding Numpy to a degree will help you understand the other data science libraries significantly better. Also numpy is a very impressive piece of software. And it is fast.</p>
<p>First let us introduce the concept of a namespace.</p>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>numpy is a ‘module’, which gives additional functionality to the core language Python. A module must be important before it can be used. In order to avoid confusion between commands with the same name, one should always import it with an alias, i.e.</p>
<p>NOT: from numpy import * BUT: import numpy as np ///‘np’ is a convention, this could be anything, but always use np for readability</p>
<p>Like all other modules, the numpy modules provides additional ‘attributes’ and ‘methods’. This is language from object-oriented programming. An attribute is a feature of an object, a method is an action on the object. Both can be used using the ‘dot’ notation.</p>
<p>The key element of numpy is that it constructs an array, which can have multiple dimensions: so it can be a two-dimensional table, or a higher dimensional object.</p>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>np.array([[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],[<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>array([[1, 2, 3],
       [4, 5, 6]])</code></pre>
</div>
</div>
<p>‘array’ is the basic constructor method to create a numpy array. Other constructors:</p>
<div class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>np.zeros([<span class="dv">5</span>,<span class="dv">5</span>])</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>np.eye(<span class="dv">5</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>np.linspace(<span class="dv">10</span>,<span class="dv">30</span>,<span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="60">
<pre><code>array([[0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0.],
       [0., 0., 0., 0., 0.]])</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="60">
<pre><code>array([[1., 0., 0., 0., 0.],
       [0., 1., 0., 0., 0.],
       [0., 0., 1., 0., 0.],
       [0., 0., 0., 1., 0.],
       [0., 0., 0., 0., 1.]])</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="60">
<pre><code>array([10., 15., 20., 25., 30.])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>np.array([[<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>],[<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>]]).reshape(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>array([[[1],
        [2],
        [3]],

       [[4],
        [5],
        [6]]])</code></pre>
</div>
</div>
<p>You can think of a numpy array as the values table in a Stata dataset. The difference is that it’s easy to have many numpy arrays and one can change shape, do wild broadcasting, merge, concatenate, add dimensions, make it flat etc. It has enormous flexibility. The above shows you a three dimensional array. It can be useful to have three dimensional datasets, for example for time series, where you might have on the x,y plane revenues, cost, profit over years for a company, and in the third dimension, from front-to-back, different companies. Then it is easy to sum over years, and over companies, or both - see a few lines below.</p>
<p>Some functions are available in numpy and in pure python, for example the sum-function. Below you can see how the namespace classifier avoids a naming collision. You can also see that an this operaton, numpy is more than 100 times faster.</p>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.random.random(<span class="dv">10000000</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>timeit <span class="bu">sum</span>(a)</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>timeit np.<span class="bu">sum</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>639 ms ± 9.57 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
4.27 ms ± 289 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)</code></pre>
</div>
</div>
<p>Most of the time when working with python, we will work with the Pandas library and for the introduction to machine learning with scikit-learn, to be introduced in the next session. But the Pandas library essentially gives you column names for numpy arrays and some other wrapper functions. Most of the funcionality is inherited from numpy.</p>
<p>Since we will mostly be using numpy ‘under the hood’, we will now concentrate on certain aspects that will continue to appear in our work: ‘universal functions’, which are functions that work on arrays and slicing and indexing.</p>
<p>It always very important to check types: for example, if there is a string in a column, then certain operations like addition do not work.</p>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>a.dtype</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>dtype('float64')</code></pre>
</div>
</div>
<p>Also an array can have multiple types - just like a Stata table can have integer and string columns.</p>
<p>Another command you will use often, also with Pandas, is the shape attribute. It will tell you the dimension of the array you are working with. Since the dimension is not fixed at the number of observables as in Stata, it is likely to change throughout your anlaysis, For example, you can easily carry out anlayses on a date-subset (say only a few years) while keeping the original dataset alive. Or you can clean a dataset and reduce it or merge it with another dataset, and keep all of these in memory and accessible.</p>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>a.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>(10000000,)</code></pre>
</div>
</div>
<section id="slicing-1" class="level3" data-number="4.1">
<h3 data-number="4.1" class="anchored" data-anchor-id="slicing-1"><span class="header-section-number">4.1</span> Slicing</h3>
<p>Array slicing refers to cutting and rearranging arrays.</p>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="dv">12</span>).reshape(<span class="dv">3</span>,<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="dv">12</span>).reshape(<span class="dv">3</span>,<span class="dv">4</span>)[:,<span class="dv">2</span>]</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="dv">12</span>).reshape(<span class="dv">3</span>,<span class="dv">4</span>)[<span class="dv">1</span>:<span class="dv">3</span>,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>array([ 2,  6, 10])</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>array([ 6, 10])</code></pre>
</div>
</div>
<p>Careful with dimensions: a two-dimensional (1,1) array has different dimensions from a number, which will not allow array-operations on it.</p>
<div class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="dv">12</span>).reshape(<span class="dv">3</span>,<span class="dv">4</span>)[<span class="dv">1</span>:<span class="dv">2</span>,<span class="dv">2</span>:<span class="dv">3</span>]</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="dv">12</span>).reshape(<span class="dv">3</span>,<span class="dv">4</span>)[<span class="dv">1</span>,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>array([[6]])</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>6</code></pre>
</div>
</div>
</section>
<section id="concatenating-arrays" class="level3" data-number="4.2">
<h3 data-number="4.2" class="anchored" data-anchor-id="concatenating-arrays"><span class="header-section-number">4.2</span> Concatenating arrays</h3>
<div class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.arange(<span class="dv">12</span>).reshape(<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>b <span class="op">=</span> np.arange(<span class="dv">24</span>).reshape(<span class="dv">6</span>,<span class="dv">4</span>)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>np.concatenate([a,b], axis<span class="op">=</span><span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15],
       [16, 17, 18, 19],
       [20, 21, 22, 23]])</code></pre>
</div>
</div>
</section>
<section id="universal-functions" class="level3" data-number="4.3">
<h3 data-number="4.3" class="anchored" data-anchor-id="universal-functions"><span class="header-section-number">4.3</span> Universal functions</h3>
<p>Similar to operations in Stata, it is possible to use functions that operate element-wise. We can operate on multiple columns, slices and so on and not only column by column. The beauty of these functions is that they avoid loops. With numpy and pandas, similar to Stata, one should avoid loops when possible.</p>
<div class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> np.arange(<span class="dv">12</span>).reshape(<span class="dv">3</span>,<span class="dv">4</span>)</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>a<span class="op">+</span><span class="dv">5</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>a<span class="op">*</span><span class="dv">12</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>a<span class="op">*</span>a</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>np.sin(a)</span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>np.log(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>array([[ 5,  6,  7,  8],
       [ 9, 10, 11, 12],
       [13, 14, 15, 16]])</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>array([[  0,  12,  24,  36],
       [ 48,  60,  72,  84],
       [ 96, 108, 120, 132]])</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>array([[  0,   1,   4,   9],
       [ 16,  25,  36,  49],
       [ 64,  81, 100, 121]])</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>array([[ 0.   ,  0.841,  0.909,  0.141],
       [-0.757, -0.959, -0.279,  0.657],
       [ 0.989,  0.412, -0.544, -1.   ]])</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>/var/folders/yd/k4tm8g913dvg4k4_3d3zjcn1sp8l_j/T/ipykernel_1519/2778848418.py:7: RuntimeWarning: divide by zero encountered in log
  np.log(a)</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>array([[ -inf, 0.   , 0.693, 1.099],
       [1.386, 1.609, 1.792, 1.946],
       [2.079, 2.197, 2.303, 2.398]])</code></pre>
</div>
</div>
<p>We have already seen aggregation functions:</p>
<div class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>a.<span class="bu">sum</span>()</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>a.cumsum()</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>a.std()</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>a.<span class="bu">min</span>(axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>a.argmax()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>66</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>array([ 0,  1,  3,  6, 10, 15, 21, 28, 36, 45, 55, 66])</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>3.452052529534663</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>array([0, 4, 8])</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>11</code></pre>
</div>
</div>
</section>
<section id="boolean-masks" class="level3" data-number="4.4">
<h3 data-number="4.4" class="anchored" data-anchor-id="boolean-masks"><span class="header-section-number">4.4</span> Boolean masks</h3>
<p>One can select subarrays with certain values by finding a boolean mask. Note that the shape changes to a flat array, as only the True values are reported.</p>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>a</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>a<span class="op">&lt;</span><span class="dv">9</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>np.<span class="bu">all</span>(a<span class="op">&lt;</span><span class="dv">0</span>)</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>a[a<span class="op">&lt;</span><span class="dv">9</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="57">
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="57">
<pre><code>array([[ True,  True,  True,  True],
       [ True,  True,  True,  True],
       [ True, False, False, False]])</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="57">
<pre><code>False</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="57">
<pre><code>array([0, 1, 2, 3, 4, 5, 6, 7, 8])</code></pre>
</div>
</div>
</section>
<section id="example-of-numerous-functionality-creating-a-histogram-of-univariate-random-numbers" class="level3" data-number="4.5">
<h3 data-number="4.5" class="anchored" data-anchor-id="example-of-numerous-functionality-creating-a-histogram-of-univariate-random-numbers"><span class="header-section-number">4.5</span> Example of numerous functionality: creating a histogram of univariate random numbers</h3>
<div class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">58</span>)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.random.randn(<span class="dv">1000</span>)</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>bins <span class="op">=</span> np.linspace(<span class="op">-</span><span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">20</span>)</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>counts <span class="op">=</span> np.zeros_like(bins)</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> np.searchsorted(bins,x)</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>np.add.at(counts, i, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>plt.step(bins, counts, linestyle<span class="op">=</span><span class="st">'solid'</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="session2_files/figure-html/cell-34-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>